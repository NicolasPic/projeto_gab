<h1>Gabhoot</h1>

<p id="tempo-restante">Tempo restante: <span id="tempo">35</span> segundos</p>

<form id="form-resposta" action="/jogar/proxima" method="POST">
    <input type="hidden" name="resposta" id="resposta-selecionada">
    <input type="hidden" name="tempoRestante" id="tempo-restante-valor"> <!-- Campo para o tempo restante -->
    <div class="pergunta">
        <h2>{{pergunta.texto}}</h2>
        {{#each pergunta.respostas}}
        <div>
            <label>
                <input 
                    type="radio" 
                    name="resposta" 
                    value="{{id}}" 
                    onchange="selecionarResposta(this.value)">
                {{texto}}
            </label>
        </div>
        {{/each}}
    </div>
    <button type="submit">Enviar Resposta</button>
</form>

<script>
    let tempo = 35;
    const tempoRestanteEl = document.getElementById('tempo');
    const form = document.getElementById('form-resposta');
    const inputResposta = document.getElementById('resposta-selecionada');
    const inputTempoRestante = document.getElementById('tempo-restante-valor');

    function selecionarResposta(valor) {
        inputResposta.value = valor || ''; // Define "" se vazio
    }

    const contador = setInterval(() => {
        tempo--;
        tempoRestanteEl.textContent = tempo;

        if (tempo <= 0) {
            clearInterval(contador);
            inputTempoRestante.value = 0; // Define 0 como tempo restante
            form.submit();
        }
    }, 1000);

    form.addEventListener('submit', () => {
        clearInterval(contador);
        inputTempoRestante.value = tempo; // Define o tempo restante no momento do envio
    });
</script>
