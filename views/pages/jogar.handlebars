<div class="jogar-container">
    <div class="metade-jogar-container jogar-superior"></div>

    <div class="jogar-centro-superior-container">
        <h1>GABHoot</h1>
    </div>

    <div class="jogar-centro-inferior-container">
    <!-- Exibir o nome do jogador automaticamente -->
    <div class="nome-jogador-container">
        <label for="nomeJogador">Nome do Jogador:</label>
        <input type="text" id="nomeJogador" value="{{nomeJogador}}" readonly />
    </div>

    <div class="botao-jogar-container">
        <button id="btnCriarSala" class="botao-sala">Criar Sala</button>
        <button id="btnEntrarSala" class="botao-sala">Entrar na Sala</button>
        <input type="text" id="codigoSala" placeholder="Código da Sala" />
    </div>
</div>

<script src="/socket/gameSocket.js"></script>
<script>
    // Conectando ao servidor com Socket.IO
    const socket = io();

    // Referenciando os botões e o campo de texto
    const btnCriarSala = document.getElementById('btnCriarSala');
    const btnEntrarSala = document.getElementById('btnEntrarSala');
    const codigoSalaInput = document.getElementById('codigoSala');
    const nomeJogadorInput = document.getElementById('nomeJogador');  // Nome do jogador já preenchido

    // Enviar nome do jogador assim que a página carregar
    const nomeJogador = nomeJogadorInput.value.trim();
    if (nomeJogador) {
        socket.emit('nomeJogador', nomeJogador);  // Envia o nome do jogador imediatamente
    }

    // Evento de clique para criar uma sala
    btnCriarSala.addEventListener('click', () => {
        const codigoSala = codigoSalaInput.value.trim();  // Obtém o código da sala
        if (codigoSala) {
            socket.emit('criarSala', codigoSala);  // Emite o evento de criação da sala
        } else {
            alert('Por favor, insira um código de sala.');
        }
    });

    // Evento de clique para entrar em uma sala
    btnEntrarSala.addEventListener('click', () => {
        const codigoSala = codigoSalaInput.value.trim();  // Obtém o código da sala
        if (codigoSala) {
            socket.emit('entrarSala', codigoSala);  // Emite o evento de entrada na sala
        } else {
            alert('Por favor, insira o código da sala.');
        }
    });

    // Receber confirmação da criação da sala
    socket.on('salaCriada', (codigoSala) => {
        window.location.href = `/jogar/sala/${codigoSala}`;
    });

    // Receber mensagem de erro
    socket.on('erro', (mensagem) => {
        alert(`Erro: ${mensagem}`);
    });
</script>

