<div class="jogar-container">
    <div class="metade-jogar-container jogar-superior"></div>

    <div class="jogar-centro-superior-container">
        <h1>GABHoot</h1>
    </div>

    <div class="jogar-centro-inferior-container">
        <!-- Exibir o nome do jogador automaticamente -->
        <div class="nome-jogador-container">
            <label for="nomeJogador">Nome do Jogador:</label>
            <input type="text" id="nomeJogador" value="{{nomeJogador}}" readonly />
        </div>

        <div class="botao-jogar-container">
            <button id="btnCriarSala" class="botao-sala">Criar Sala</button>
            <button id="btnEntrarSala" class="botao-sala">Entrar na Sala</button>
            <input type="text" id="codigoSala" placeholder="Código da Sala" />
        </div>
    </div>
</div>

<script src="/socket/gameSocket.js"></script>
<script>
    const socket = io();

    const nomeJogadorInput = document.getElementById('nomeJogador');
    const btnCriarSala = document.getElementById('btnCriarSala');
    const btnEntrarSala = document.getElementById('btnEntrarSala');
    const codigoSalaInput = document.getElementById('codigoSala');

    // Verifica se o nome está preenchido
    const nomeJogador = nomeJogadorInput.value.trim();
    if (nomeJogador) {
        socket.emit('nomeJogador', nomeJogador);  // Envia o nome para o servidor
    } else {
        alert('Por favor, informe seu nome.');
    }

    // Criar Sala
    btnCriarSala.addEventListener('click', () => {
        if (!nomeJogador) {
            alert('Por favor, informe seu nome antes de criar uma sala.');
            return;
        }
        const codigoSala = codigoSalaInput.value.trim();
        if (codigoSala) {
            socket.emit('criarSala', codigoSala);
        } else {
            alert('Por favor, insira um código para a sala.');
        }
    });

    // Entrar em Sala
    btnEntrarSala.addEventListener('click', () => {
        if (!nomeJogador) {
            alert('Por favor, informe seu nome antes de entrar na sala.');
            return;
        }
        const codigoSala = codigoSalaInput.value.trim();
        if (codigoSala) {
            socket.emit('entrarSala', codigoSala);
        } else {
            alert('Por favor, insira um código de sala.');
        }
    });

      // Receber evento de sucesso ao criar a sala
    socket.on('salaCriada', (codigoSala) => {
        // Redireciona para a página da sala
        window.location.href = `/jogar/sala/${codigoSala}`;
    });

    // Receber evento de sucesso ao entrar na sala
    socket.on('entrarSalaSucesso', (codigoSala) => {
        // Redireciona para a página da sala
        window.location.href = `/jogar/sala/${codigoSala}`;
    });


    // Receber erro do servidor
    socket.on('erro', (mensagem) => {
        alert(`Erro: ${mensagem}`);
    });
</script>
